---
title: Cron表达式<br>
date: 2021-02-20 21:38:28
---
Cron表达式是一个字符串，字符串以5或6个空格隔开，分为6或7个域，每一个域代表一个含义，Cron有如下两种语法格式：

（1） Seconds Minutes Hours DayofMonth Month DayofWeek Year

（2） Seconds Minutes Hours DayofMonth Month DayofWeek

## 一、结构

{秒数} {分钟} {小时} {日期} {月份} {星期} {年份(可为空)}

## 二、各字段的含义

|字段|允许值|允许的特殊字符|
|-|-|-|
|秒（Seconds）|0~59的整数|, - * /    四个字符|
|分（*Minutes*）|0~59的整数|, - * /    四个字符|
|小时（*Hours*）|0~23的整数|, - * /    四个字符|
|日期（*DayofMonth*）|1~31的整数（但是你需要考虑你月的天数）|,- * ? / L W C     八个字符|
|月份（*Month*）|1~12的整数或者 JAN-DEC|, - * /    四个字符|
|星期（*DayofWeek*）|1~7的整数或者 SUN-SAT （1=SUN）|, - * ? / L C #     八个字符|
|年(可选，留空)（*Year*）|1970~2099|, - * /    四个字符|


## 三、特殊字符含义

### 字符 "\*" 
?>表示示匹配该域的任意值。<br>
假如在Minutes域使用, 即表示每分钟都会触发事件。

### 字符 "?"
?>只能用在DayofMonth和DayofWeek两个域。它也匹配域的任意值，但实际不会。<br>
因为DayofMonth和DayofWeek会相互影响。例如想在每月的20日触发调度，不管20日到底是星期几，则只能使用如下写法： 13 13 15 20 * ?, 其中最后一位只能用？，而不能使用*，如果使用*表示不管星期几都会触发，实际上并不是这样。

### 字符 "\-"
?>表示范围。<br>
例如在Minutes域使用5-20，表示从5分到20分钟每分钟触发一次 

### 字符 "/"
?>表示步长。<br>
起始时间开始触发，然后每隔固定时间触发一次。例如在Minutes域使用5/20,则意味着5分钟触发一次，而25，45等分别触发一次. 

### 字符 ","
?>表示列出枚举值。<br>
例如：在Minutes域使用5,20，则意味着在5和20分每分钟触发一次。 

### 字符 "L"
?>表示最后，只能出现在DayofWeek和DayofMonth域。<br>
如果在DayofWeek域使用5L,意味着在最后的一个星期四触发。

### 字符 "W"
?>只允许日期域出现。<br>
这个字符用于指定日期的最近工作日。例如：如果你在日期域中写 “15W”，表示：这个月15号最近的工作日。所以，如果15号是周六，则任务会在14号触发。如果15好是周日，则任务会在周一也就是16号触发。如果是在日期域填写“1W”即使1号是周六，那么任务也只会在下周一，也就是3号触发，“W”字符指定的最近工作日是不能够跨月份的。字符“W”只能配合一个单独的数值使用，不能够是一个数字段，如：1-15W是错误的。
“L”和“W”可以在日期域中联合使用，LW表示这个月最后一周的工作日。

### 字符 "\#"
?>只允许在星期域中出现。<br>
用来指定具体的周数，"#"前面代表星期，"#"后面代表本月第几周，比如"2#2"表示本月第二周的星期一，"5#3"表示本月第三周的星期四，因此，"5L"这种形式只不过是"#"的特殊形式而已

### 字符 "C"
?>只允许在日期域和星期域出现。<br>
这个字符依靠一个指定的“日历”。也就是说这个表达式的值依赖于相关的“日历”的计算结果，如果没有“日历”关联，则等价于所有包含的“日历”。如：日期域是“5C”表示关联“日历”中第一天，或者这个月开始的第一天的后5天。星期域是“1C”表示关联“日历”中第一天，或者星期的第一天的后1天，也就是周日的后一天（周一）。


## 四、常用表达式例子

|表达式|含义|
|-|-|
|**0 0    2        1   \*   ?    \*** |表示在每月的1日的凌晨2点调整任务|
|**0 15   10       ?   \*   MON-FRI**|表示周一到周五每天上午10:15执行作业|
|**0 15   10       ?   6L   2002-2006**|表示2002-2006年的每个月的最后一个星期五上午10:15执行动作|
|**0 0    10,14,16 \*  \*   ?**|每天上午10点，下午2点，4点|
|**0 0/30 9-17     \*  \*   ?**|朝九晚五工作时间内每半小时|
|**0 0    12       ?   \*   WED**|表示每个星期三中午12点|
|**0 0    12       *   \*   ?**|每天中午12点触发|
